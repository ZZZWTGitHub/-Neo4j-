上一周主要开发进度：1.2



1. 

在结构化查询功能里替换传统结构化数据库。构建数据库，编写后端代码。

收益：结构化数据的查询速度，查询时间缩短到毫秒级

2. 

express后端代码，基于child_process功能实现了胶水功能。实现了以express后端调用算法模型的效果。

不足：算法模型运行速度较慢，用户体验不够好。

3. 

调整原有代码中的antiShake功能，防止数据外泄

4. 

修复了Chrome浏览器无法正常启动的问题

5. 

提取公共代码，使项目代码更清晰，便于维护和升级代码



---------

主要耗费时间很长的是：express链接TransE模型。

问题核心在于：后端程序运行在Nodejs环境下，这与python编写的推荐算法并不兼容。

当时想的解决办法有两种：

- 学习一种基于python的后端，再多开一个端口对推荐算法进行支持
  - 优点：便于分离业务、对推荐算法的支持很完善
  - 缺点：时间不足，功能耦合
- 使用express的一些中间件，使js作为胶水使express后端链接到推荐算法
  - 优点：耦合低，单一出入口符合软件开发的逻辑
  - 缺点：没有规范的流程，可借鉴的经验也少

后来我们选用后者进行开发，具体思路如下：

- 使用nodejs的中间件spawn，分离子进程吗，用来处理与python间的通信
- 对推荐算法进行封装，使之方便系统调用。
- 逻辑：
  - 在express程序中，监听到前端发来的axios请求后，获取其参数，
  - 分离出子进程，传入参数，并通知运行python的推荐算法代码。
  - 监听标准输入输出流、错误信息、文件关闭，并分别作出响应。

开发中遇到的问题：

- 代码移植产生的路径问题，根据环境所需的格式重写
- 系统调用、监听、传参的编码问题，express代码中添加解码步骤

